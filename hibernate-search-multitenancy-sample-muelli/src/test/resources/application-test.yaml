spring:
  main:
    banner-mode: off
  datasource:
    url: 'jdbc:h2:mem:testdb;DB_CLOSE_ON_EXIT=FALSE'
    driver-class-name: 'org.h2.Driver'
    username: sa
    password: password
  jpa:
    properties:
      javax:
        persistence:
          validation:
            mode: none
      hibernate:
        formatsql: true
        generatestatistics: false
        orderinserts: true
        jdbc:
          batchsize: 100
        '[tenant_identifier_resolver]': 'de.cmuellerke.poc.tenancy.TenantIdentifierResolver'
        search:
# new since last time        
          coordination:
            strategy: outbox-polling
          multi_tenancy:
            # we have to provide a list of tenants
            tenant_ids: t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, t14, t15, t16, t17, t18, t19, t20
          schema_management:
            strategy: drop-and-create
# reenable if outbox-polling is disabled            
#          automatic_indexing:
#              synchronization:
#                strategy: sync # only for testing reasonably
          backend:
            protocol: https
            username: elastic
            password: test
            log:
                '[json_pretty_printing]': true
            client:
                configurer: bean:ElasticsearchHttpClientConfigurer
    show-sql: true
    generate-ddl: true
    database-platform: 'org.hibernate.dialect.H2Dialect'
  h2:
    console:
      enabled: true
      path: /h2-console
  flyway:
    enabled: false
logging:
  level:
    org:
      hibernate:
        SQL: INFO
    org.hibernate.search.elasticsearch.request: TRACE
    org.apache.http.impl.nio.client: TRACE
    org.hibernate.search.query: TRACE
    org.hibernate.search: DEBUG
    tc: DEBUG
    '[org.testcontainers]': DEBUG 

#Unused properties: [hibernate.search.automatic-indexing.synchronization.strategy, hibernate.search.schema-management.strategy]. To disable this warning, set the property 'hibernate.search.configuration_property_checking.strategy' to 'ignore'.
#Unused properties: [hibernate.search.schema-management.strategy]. To disable this warning, set the property 'hibernate.search.configuration_property_checking.strategy' to 'ignore'.

